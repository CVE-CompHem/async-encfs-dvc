schema: '2.0'
stages:
  app_sim_v1_simulation_15:
    cmd: set -o pipefail; mkdir -p ../../../../../encrypt/app_sim/v1/simulation/15/output
      output && ../../../../../../dvc_tools/slurm_scripts/slurm_enqueue.sh app_sim_v1_simulation_15
      dvc_app.yaml simulation ../../../../../../dvc_tools/encfs_scripts/encfs_mount_and_run_v2.sh
      ../../../../../encrypt /tmp/encfs_25680_demo_encfs_app_sim_v1_simulation_15_701c16cf7565
      ../../../../../../../../../../../../tmp/encfs_25680_demo_encfs_app_sim_v1_simulation_15_701c16cf7565/app_sim/v1/simulation/15/output/encfs_out_{MPI_RANK}.log
      sarus run --mount=type=bind,source="/tmp/encfs_25680_demo_encfs_app_sim_v1_simulation_15_701c16cf7565",destination="/app-data"  --entrypoint
      bash load/castor-dvc/app_sim -c "/src/app/simulation.sh --simulation-input /app-data/app_sim/v1/simulation/14/output
      --simulation-output /app-data/app_sim/v1/simulation/15/output --simulation-output-file-num-per-rank
      1 --simulation-output-file-size 32000000000" 2>&1 | tee output/stage_out.log
    deps:
    - path: ../../../../../encrypt/app_sim/v1/simulation/14/output
      md5: 5079b52917de807c072812b5c71be5e9.dir
      size: 256000006786
      nfiles: 32
    outs:
    - path: ../../../../../encrypt/app_sim/v1/simulation/15/output
      md5: fc0691aa83d2fccdc13c493e726ee7f2.dir
      size: 512000006783
      nfiles: 32
    - path: output
      md5: b19955f5d5d5b0dadf998cf216531e4c.dir
      size: 33183
      nfiles: 3
